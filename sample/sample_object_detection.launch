<launch>
  <arg name="gui" />
  <arg name="model" />
  <arg name="pretrained_model" />
  <arg name="gpu" />
  <arg name="label_names" />

  <node name="image_publisher" pkg="jsk_perception" type="image_publisher.py">
    <rosparam subst_value="true">
      publish_info: false
      file_name: $(find ros_chainercv)/sample/images/sample_object_detection.jpg
    </rosparam>
  </node>

  <include file="$(find ros_chainercv)/launch/object_detection.launch">
    <arg name="model" value="$(arg model)" />
    <arg name="pretrained_model" value="$(arg pretrained_model)" />
    <arg name="gpu" value="$(arg gpu)" />
    <arg name="label_names" value="$(arg label_names)" />
    <arg name="input_image" value="image_publisher/output" />
  </include>

  <node name="image_view" pkg="image_view" type="image_view" if="$(arg gui)">
    <remap from="image" to="object_detection/output/vis" />
  </node>

</launch>
